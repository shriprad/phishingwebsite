<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Previous head content remains the same -->
    <style>
        /* Previous styles remain the same */
        
        .fetch-button {
            background-color: #4f46e5;
            margin-bottom: 1rem;
            width: 100%;
        }
        
        .urls-container {
            margin-top: 1rem;
            max-height: 300px;
            overflow-y: auto;
            background-color: #f8fafc;
            border-radius: 8px;
            padding: 1rem;
        }
        
        .url-item {
            padding: 0.5rem;
            border-bottom: 1px solid #e2e8f0;
            cursor: pointer;
        }
        
        .url-item:hover {
            background-color: #e2e8f0;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Advanced Phishing URL Analyzer</h1>
        
        <button onclick="fetchUrls()" class="fetch-button" id="fetchButton">
            Fetch AWS-Hosted Phishing URLs
        </button>
        
        <div id="urlsContainer" class="urls-container" style="display: none;">
            <h3>AWS-Hosted Phishing URLs:</h3>
            <div id="urlsList"></div>
        </div>
        
        <div class="search-box">
            <form method="POST" class="input-group">
                <input type="text" name="url" id="urlInput" placeholder="Enter URL to analyze..." required>
                <button type="submit">Analyze</button>
            </form>
        </div>

        <!-- Rest of the template remains the same -->
    </div>

    <script>
        async function fetchUrls() {
            const button = document.getElementById('fetchButton');
            const container = document.getElementById('urlsContainer');
            const urlsList = document.getElementById('urlsList');
            
            button.innerHTML = '<div class="loading-spinner"></div>Fetching URLs...';
            button.disabled = true;
            
            try {
                const response = await fetch('/fetch-urls');
                const data = await response.json();
                
                if (data.success) {
                    container.style.display = 'block';
                    urlsList.innerHTML = data.urls.map(url => `
                        <div class="url-item" onclick="setUrl('${url}')">
                            ${url}
                        </div>
                    `).join('');
                } else {
                    alert('Error fetching URLs: ' + data.error);
                }
            } catch (error) {
                alert('Failed to fetch URLs: ' + error);
            } finally {
                button.innerHTML = 'Fetch AWS-Hosted Phishing URLs';
                button.disabled = false;
            }
        }
        
        function setUrl(url) {
            document.getElementById('urlInput').value = url;
        }
    </script>
</body>
</html>
